# How would you go about locating the cause of a stack overflow or watchdog timer reset?
It is one of the tricky problem to solve, but it is solvable. I'll talk about things that I have done is past. If you are in a FreeRTOS environment, you can use a feature called watermark, and print a debug statement if the stack assigned to a task is getting close to 0. If it is try to increase the stack for it, and run the program again and see if the problem goes away.
Other more traditional way is to use the debugger and step into the code and see where the code actually fails, look at the call stack and see if there is nested calls to a function or any of the function has a local variable which has a lot of memory assigned. If there is a variable in a function which is consuming lot of memory then make that as static so that it goes in the global memory, still the scope of the variable will be within that function.
One more way is to print out top of the stack (will depend on the compiler you are using and if they have a built in fucntion) at every function call and make sure it is not close to the end of the stack.
Above are some of the methods that I have used in past to figure out a stack overflow.

For the watchdog timer reset, the thing that I have done in past is to save the LR and PC in the .noinit RAM section whenever the watchdog bites (which will be in an interrupt). When the system boots up again print out the LR and PC. And then look at the map file and try to find the address which is close to it, and then walk through that code and see a potential proble, maybe a for loop is running for a long time or there is a bad argument in the while loop. These is what I have done in past.
